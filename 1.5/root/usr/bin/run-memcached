#!/bin/bash

OPTIONS=""

[ -n "$MEMCACHED_MAX_MEMORY" ] && OPTIONS+=" -m $MEMCACHED_MAX_MEMORY"
[ -n "$MEMCACHED_MAX_CONNECTIONS" ] && OPTIONS+=" -c $MEMCACHED_MAX_CONNECTIONS"
[ -n "$MEMCACHED_SLAB_PAGE_SIZE" ] && OPTIONS+=" -I $MEMCACHED_SLAB_PAGE_SIZE"
[ -n "$MEMCACHED_EXTRA_PARAMETERS" ] && OPTIONS+=" $MEMCACHED_EXTRA_PARAMETERS"

echo "Starting memcached $OPTIONS $@"
exec /usr/bin/memcached $OPTIONS "$@"